load(file='NSIBTS_cod_surv_dat.Rdata')
dat.cv
as.data.frame(dat.cv)
table(dat.cv)
split(dat.cv)
?merge
data.frame(dat.cv)
as.data.frame(t(dat.cv))
eff.seq <- seq(100,max(n.tow),10)
eff.seq <- seq(100,1170,10)
cbind(eff.seq,t(dat.cv))
cbind(effort=eff.seq,t(dat.cv))
class(cbind(effort=eff.seq,t(dat.cv)))
as.data.frame(cbind(effort=eff.seq,t(dat.cv)))
mdl <- cv ~ 1/sqrt(effort)
nls(mdl,data=as.data.frame(cbind(effort=eff.seq,t(dat.cv))))
mdl <- data ~ 1/sqrt(effort)
nls(mdl,data=as.data.frame(cbind(effort=eff.seq,t(dat.cv))))
nls(mdl,data=cbind(effort=eff.seq,t(dat.cv)))
c(dat.cv)
c(dat.cv)[1:10]
dat.cv
dat.raw <- read.csv('cod_IV.csv')
years <- unique(dat.raw$year)
dat.fit <- cbind(effort=rep(eff.seq,each=length(years)),cv=c(dat.cv))
head(dat.fit)
mdl <- cv ~ 1/sqrt(effort)
dat.fit <- cbind(effort=rep(eff.seq,each=length(years)),cv=c(dat.cv))
nls(mdl,data=dat.fit)
?nls
dat.fit <- data.frame(effort=rep(eff.seq,each=length(years)),cv=c(dat.cv))
head(dat.fit)
mdl <- cv ~ alpha/sqrt(effort)
dat.fit <- data.frame(effort=rep(eff.seq,each=length(years)),cv=c(dat.cv))
nls(mdl,data=dat.fit)
nls(mdl,data=dat.fit,start=list(alpha=1))
fit <- nls(mdl,data=dat.fit,start=list(alpha=1))
predict(fit,dat.fit)
predict(fit,data.frame(effort=eff.seq))
plot(predict(fit,data.frame(effort=eff.seq)))
mdl <- cv ~ alpha * effort ^ beta
boxplot(dat.cv,outline=F,ylab=expression(paste('CV [',italic(hat(I)),']')),xlab='Survey effort (annual no. of tows)',main='')
mdl <- cv ~ alpha * effort ^ beta
dat.fit <- data.frame(effort=rep(eff.seq,each=length(years)),cv=c(dat.cv))
fit <- nls(mdl,data=dat.fit,start=list(alpha=1,beta=-2))
mdl <- cv ~ alpha * effort ^ -2
fit <- nls(mdl,data=dat.fit,start=list(alpha=1))
mdl <- cv ~ alpha * effort ^ -beta
fit <- nls(mdl,data=dat.fit,start=list(alpha=1,beta=2))
mdl <- cv ~ alpha * effort ^ (-beta)
fit <- nls(mdl,data=dat.fit,start=list(alpha=1,beta=2))
fit <- nls(mdl,data=dat.fit,start=list(alpha=1,beta=1))
fit
mdl <- cv ~ alpha * effort ^ beta
dat.fit <- data.frame(effort=rep(eff.seq,each=length(years)),cv=c(dat.cv))
fit <- nls(mdl,data=dat.fit,start=list(alpha=1,beta=-0.5))
predict(fit,data.frame(effort=eff.seq))
abline(predict(fit,data.frame(effort=eff.seq)),col=2)
lines(predict(fit,data.frame(effort=eff.seq)),col=2)
lines(predict(fit,data.frame(effort=eff.seq)),col=2,lwd=3)
predict(fit,effort=100)
predict(fit,data.frame(effort=100))
savePlot('effCV.pdf',type='pdf')
dev.off()
cv.pred <- function(effort) predict(fit,data.frame(effort))
cv.pred(100)
cv.pred(100:102)
save(fit,cv.pred,file='cv_pred_func.Rdata')
eff.seq
